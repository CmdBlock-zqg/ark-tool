(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69ac1cce"],{"038b":function(t,i,a){"use strict";a.r(i);var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticStyle:{padding:"16px"}},[a("div",{staticClass:"card"},[a("v-card-text",[a("div",{staticClass:"text-h5 text--primary"},[t._v(" 材料仓库 "),a("v-btn",{staticStyle:{float:"right"},attrs:{color:"primary",elevation:"2"},on:{click:t.save}},[a("v-icon",[t._v("mdi-content-save-outline")]),t._v("保存")],1)],1),a("div",{staticStyle:{"margin-top":"8px"}},[t._v("点击材料图标可查看更多选项")])])],1),a("div",{staticClass:"d-flex justify-space-around flex-wrap"},t._l(t.user_mtls,(function(i,s){return a("v-card",{key:s,staticClass:"item",class:["t"+t.data.item[s].rarity,"order-"+(4-t.data.item[s].rarity)],attrs:{elevation:"3"}},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(i){var e=i.on,n=i.attrs;return[a("img",t._g(t._b({attrs:{src:"/assets/items/"+t.data.item[s].icon+".png",height:"80",width:"80"}},"img",n,!1),e))]}}],null,!0)},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{attrs:{link:""},on:{click:function(i){return t.openEdit(s)}}},[a("v-list-item-title",[t._v("输入数量")])],1),a("v-list-item",{attrs:{link:""},on:{click:function(i){return t.openForm(s)}}},[a("v-list-item-title",[t._v("合成")])],1)],1)],1),a("div",{staticClass:"text-center"},[t._v(t._s(t.data.item[s].name))]),a("div",{staticClass:"d-flex justify-space-between"},[a("v-btn",{attrs:{elevation:"2",icon:"",small:""},on:{click:function(i){return t.add(s,-1)}}},[a("v-icon",[t._v("mdi-minus")])],1),a("span",{staticStyle:{"line-height":"24px"}},[t._v(t._s(i))]),a("v-btn",{attrs:{elevation:"2",icon:"",small:""},on:{click:function(i){return t.add(s,1)}}},[a("v-icon",[t._v("mdi-plus")])],1)],1)],1)})),1),a("v-dialog",{attrs:{width:"400"},model:{value:t.edit.show,callback:function(i){t.$set(t.edit,"show",i)},expression:"edit.show"}},[a("v-card",[a("v-card-title",{staticClass:"text-h6 lighten-2"},[t._v(" "+t._s(t.data.item[t.edit.id].name)+" ")]),a("v-card-text",[a("v-text-field",{attrs:{label:"数量",filled:"",dense:"",type:"number"},model:{value:t.edit.num,callback:function(i){t.$set(t.edit,"num",t._n(i))},expression:"edit.num"}})],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(i){t.edit.show=!1}}},[t._v(" 取消 ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.applyEdit}},[t._v(" 确认 ")])],1)],1)],1),a("v-dialog",{attrs:{width:"400"},model:{value:t.form.show,callback:function(i){t.$set(t.form,"show",i)},expression:"form.show"}},[a("v-card",[a("v-card-title",{staticClass:"text-h6 lighten-2"},[t._v(" 合成"+t._s(t.data.item[t.form.id].name)+" ")]),a("v-card-text",[a("div",{staticStyle:{"margin-bottom":"16px"}},[a("span",[t._v("合成"+t._s(t.data.item[t.form.id].name)+" x "+t._s(t.form.formula.count)+"需要：")]),a("br"),a("span",[t._v("龙门币 x "+t._s(t.form.formula.goldCost))]),a("br"),t._l(t.form.formula.costs,(function(i,s){return[a("span",{key:s},[t._v(t._s(t.data.item[i.id].name)+" x "+t._s(i.count))]),a("br",{key:s+"br"})]}))],2),a("v-toolbar",{attrs:{dense:""}},[a("v-container",{staticStyle:{padding:"0"}},[a("v-row",[a("v-col",{staticClass:"col"},[a("v-btn",{staticStyle:{height:"48px"},attrs:{text:""},on:{click:function(i){return t.formAdd(-2)}}},[t._v("最少")])],1),a("v-col",{staticClass:"col"},[a("v-btn",{attrs:{icon:""},on:{click:function(i){return t.formAdd(-1)}}},[a("v-icon",[t._v("mdi-chevron-left")])],1)],1),a("v-col",{staticClass:"col"},[a("div",{staticStyle:{"line-height":"48px","text-align":"center"}},[t._v(" "+t._s(t.form.num)+" ")])]),a("v-col",{staticClass:"col"},[a("v-btn",{attrs:{icon:""},on:{click:function(i){return t.formAdd(1)}}},[a("v-icon",[t._v("mdi-chevron-right")])],1)],1),a("v-col",{staticClass:"col"},[a("v-btn",{staticStyle:{height:"48px"},attrs:{text:""},on:{click:function(i){return t.formAdd(2)}}},[t._v("最多")])],1)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(i){t.form.show=!1}}},[t._v(" 取消 ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.applyForm}},[t._v(" 确认 ")])],1)],1)],1)],1)},e=[],n=a("b85c"),o=a("f601"),r=window.localStorage,c={data:function(){return{data:o["a"],user_mtls:JSON.parse(r.user_mtls),edit:{show:!1,id:30011,num:0},form:{show:!1,formula:{},id:30011,num:0}}},methods:{add:function(t,i){0===this.user_mtls[t]&&-1==i||(this.user_mtls[t]+=i)},save:function(){r.user_mtls=JSON.stringify(this.user_mtls),window.mdui.snackbar({message:"已保存"})},openEdit:function(t){this.edit.id=t,this.edit.num=this.user_mtls[t],this.edit.show=!0},applyEdit:function(){var t=this.edit.num;t>=0&&(this.user_mtls[this.edit.id]=Math.floor(t)),this.edit.show=!1},openForm:function(t){o["a"].item[t].formula?(this.form.id=t,this.form.formula=o["a"].formula[o["a"].item[t].formula],this.form.num=0,this.form.show=!0):window.mdui.snackbar({message:"该材料无法合成"})},applyForm:function(){this.form.show=!1;var t,i=1/0,a=Object(n["a"])(this.form.formula.costs);try{for(a.s();!(t=a.n()).done;){var s=t.value;i=Math.min(i,Math.floor(this.user_mtls[s.id]/s.count))}}catch(c){a.e(c)}finally{a.f()}if(this.form.num>i)window.mdui.snackbar({message:"材料不足"});else{var e,o=Object(n["a"])(this.form.formula.costs);try{for(o.s();!(e=o.n()).done;){var r=e.value;this.user_mtls[r.id]-=r.count*i}}catch(c){o.e(c)}finally{o.f()}this.user_mtls[this.form.id]+=this.form.formula.count*i}},formAdd:function(t){if(-2===t)this.form.num=0;else if(-1===t)this.form.num>0&&this.form.num--;else if(1===t){var i,a=1/0,s=Object(n["a"])(this.form.formula.costs);try{for(s.s();!(i=s.n()).done;){var e=i.value;a=Math.min(a,Math.floor(this.user_mtls[e.id]/e.count))}}catch(d){s.e(d)}finally{s.f()}if(this.form.num+1>a)return;this.form.num++}else if(2===t){var o,r=1/0,c=Object(n["a"])(this.form.formula.costs);try{for(c.s();!(o=c.n()).done;){var l=o.value;r=Math.min(r,Math.floor(this.user_mtls[l.id]/l.count))}}catch(d){c.e(d)}finally{c.f()}this.form.num=r}}}},l=c,d=(a("6fad"),a("2877")),m=a("6544"),u=a.n(m),f=a("8336"),v=a("b0af"),h=a("99d9"),_=a("62ad"),p=a("a523"),b=a("169a"),y=a("ce7e"),w=a("132d"),x=a("8860"),k=a("da13"),g=a("5d23"),C=a("e449"),V=a("0fd9"),S=a("2fa4"),M=a("8654"),j=a("71d9"),O=Object(d["a"])(l,s,e,!1,null,"22bb069c",null);i["default"]=O.exports;u()(O,{VBtn:f["a"],VCard:v["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:_["a"],VContainer:p["a"],VDialog:b["a"],VDivider:y["a"],VIcon:w["a"],VList:x["a"],VListItem:k["a"],VListItemTitle:g["c"],VMenu:C["a"],VRow:V["a"],VSpacer:S["a"],VTextField:M["a"],VToolbar:j["a"]})},3224:function(t,i,a){},"6fad":function(t,i,a){"use strict";a("3224")}}]);
//# sourceMappingURL=chunk-69ac1cce.0f6cc11d.js.map